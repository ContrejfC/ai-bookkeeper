# Free Tool Configuration
# Public middle-funnel "Statement → Categorized CSV" tool

# Row limits
max_rows: 500

# File size limits (MB)
max_file_mb:
  csv: 10
  ofx: 10
  qfx: 10
  pdf: 50
  image: 25
  zip: 200

# Allowed file extensions
allowed_ext:
  - csv
  - ofx
  - qfx
  - pdf
  - jpg
  - jpeg
  - png
  - zip

# Allowed MIME types
allowed_mime:
  - text/csv
  - text/comma-separated-values
  - application/x-ofx
  - application/vnd.intu.qfx
  - application/pdf
  - image/jpeg
  - image/png
  - application/zip
  - application/x-zip-compressed
  - application/octet-stream  # Fallback, will check magic bytes

# Rate limiting
rate_limit:
  ip_per_hour: 20          # Max uploads per IP per hour
  email_per_day: 3         # Max exports per email per day
  global_per_minute: 100   # Global rate limit

# File retention
retention_hours: 24

# Watermark configuration
watermark:
  header_comment: "# Generated by AI-Bookkeeper Free Tool • Watermarked • Not for production use"
  add_column: true
  column_name: "free_tier"
  column_value: "watermarked"
  footer_note: "*** Truncated at 500 rows. Upgrade to process unlimited rows ***"

# Output columns
output_columns:
  - date
  - description
  - amount
  - category
  - confidence
  - notes

# Preview settings
preview_rows: 25

# Email verification
email_verify:
  code_length: 6
  code_ttl_minutes: 15
  token_ttl_hours: 24

# Upgrade CTAs
upgrade_ctas:
  modal_title: "Want More?"
  modal_body: "Upgrade to remove limits, export to QuickBooks/Xero, and unlock AI-powered insights."
  modal_cta: "View Pricing"
  pricing_url: "/pricing?utm_source=free_tool&utm_medium=modal&utm_campaign=post_export"

# Privacy
privacy:
  log_descriptions: false      # Never log raw transaction descriptions
  truncate_preview_chars: 80   # Truncate descriptions in preview
  hash_samples: true           # Hash samples before logging

# Backend integration
backend:
  timeout_seconds: 30
  headers:
    x-free-mode: "true"
    x-rate-limited: "true"

# Telemetry events
telemetry:
  events:
    - free_upload_start
    - free_upload_ok
    - free_upload_fail
    - free_propose_ok
    - free_propose_fail
    - free_preview_view
    - free_email_submit
    - free_email_verified
    - free_export_ok
    - free_export_fail
    - cta_upgrade_click
  
  required_properties:
    - file_type
    - rows_total
    - categories_count
    - utm_source
    - utm_medium
    - utm_campaign

# Security
security:
  require_captcha: true
  captcha_provider: turnstile  # or hcaptcha
  virus_scan_enabled: false    # Set to true if ClamAV available
  ban_list_enabled: true



